name: CI

on:
    push:
        branches: [ "master" ]
    pull_request:
        branches: [ "master" ]

jobs:
    build-windows:
        runs-on: windows-latest
        steps:
        - uses: actions/checkout@v3
        
        - name: Cache
          uses: actions/cache@v3
          with:
            path: |
                ~/.cargo/bin/
                ~/.cargo/registry/index/
                ~/.cargo/registry/cache/
                ~/.cargo/git/db/
                target/
            key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock') }}
            
        - name: Build
          run: cargo build --verbose
          
#        - name: Package via `msys2-gtk-packager`
#          shell: msys2 {0}
#          run: cargo run -- package --target x86_64-pc-windows-gnu --bin msys2-gtk-packager